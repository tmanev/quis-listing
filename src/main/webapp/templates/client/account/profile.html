<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" xmlns:v-on="http://www.w3.org/1999/xhtml"
      xmlns:v-bind="http://www.w3.org/1999/xhtml">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
    <title th:text="${title}">Profile</title>

    <link href="../../../resources/vendor/bootstrap/css/bootstrap.min.css"
          th:href="@{/resources/vendor/bootstrap/css/bootstrap.min.css}"
          rel="stylesheet"/>
    <link href="../../../resources/vendor/bootstrap/css/bootstrap-theme.min.css"
          th:href="@{/resources/vendor/bootstrap/css/bootstrap-theme.min.css}"
          rel="stylesheet"/>
    <link href="../../../resources/css/styles.css"
          th:href="@{/resources/css/styles.css}"
          rel="stylesheet"/>
</head>
<body>
<div th:fragment="content" id="profileApp" class="container">

    <div class="row">
        <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12 bhoechie-tab-container">
            <div class="col-lg-3 col-md-3 col-sm-3 col-xs-3 bhoechie-tab-menu">
                <div class="list-group">
                    <a href="#" class="list-group-item active text-center"
                        th:text="#{page.account.profile.text_01}">
                        Information
                    </a>
                    <a href="#" class="list-group-item text-center"
                       th:text="#{page.account.profile.text_02}">
                        Password change
                    </a>
                </div>
            </div>
            <div class="col-lg-9 col-md-9 col-sm-9 col-xs-9 bhoechie-tab">
                <!-- Information -->
                <div class="bhoechie-tab-content active">
                    <form id="profileForm" method="post" class="form-horizontal" th:object="${user}"
                          v-on:submit.prevent="onSubmit($event)">
                        <div class="form-group">
                            <label for="inputEmail3" class="col-sm-2 control-label"
                                th:text="#{page.account.profile.form.label.email}">Email</label>
                            <div class="col-sm-10">
                                <input type="hidden" th:field="*{login}"
                                       v-model="profile.login"/>
                                <input type="email" class="form-control" id="inputEmail3"
                                       readonly="readonly"
                                       th:field="*{email}"
                                       v-model="profile.email"
                                />
                            </div>
                        </div>
                        <div class="form-group"
                             v-bind:class="{ 'has-error': $v.profile.firstName.$error, 'has-success': $v.profile.firstName.$dirty &amp;&amp; !$v.profile.firstName.$invalid }">
                            <label for="inputFirstName" class="col-sm-2 control-label"
                                   th:text="#{page.account.profile.form.label.first_name}">First name</label>
                            <div class="col-sm-10">
                                <input type="text" class="form-control" id="inputFirstName"
                                       th:field="*{firstName}"
                                       v-model="profile.firstName"
                                       v-on:input="delayTouch($v.profile.firstName)"
                                />
                                <span class="help-block"
                                      v-if="!$v.profile.firstName.maxLength &amp;&amp; $v.profile.firstName.$dirty">
                                    <span th:text="#{validation.max}">Max</span>
                                    {{ $v.profile.firstName.$params.maxLength.max }}
                                    <span th:text="#{validation.letters}">letters</span>.
                                </span>
                            </div>
                        </div>
                        <div class="form-group"
                             v-bind:class="{ 'has-error': $v.profile.lastName.$error, 'has-success': $v.profile.lastName.$dirty &amp;&amp; !$v.profile.lastName.$invalid }">
                            <label for="inputLastName" class="col-sm-2 control-label"
                                   th:text="#{page.account.profile.form.label.last_name}">Last name</label>
                            <div class="col-sm-10">
                                <input type="text" class="form-control" id="inputLastName"
                                       th:field="*{lastName}"
                                       v-model="profile.lastName"
                                       v-on:input="delayTouch($v.profile.lastName)"
                                />
                                <span class="help-block"
                                      v-if="!$v.profile.lastName.maxLength &amp;&amp; $v.profile.lastName.$dirty">
                                    <span th:text="#{validation.max}">Max</span>
                                    {{ $v.profile.lastName.$params.maxLength.max }}
                                    <span th:text="#{validation.letters}">letters</span>.
                                </span>
                            </div>
                        </div>

                        <div class="form-group">
                            <div class="col-sm-offset-2 col-sm-10">
                                <div class="checkbox">
                                    <label>
                                        <input type="checkbox" th:field="*{updates}"
                                               v-model="profile.updates"/>
                                        <span th:text="#{page.account.profile.form.label.receive_updates_via_email}">Receive updates via email</span>
                                    </label>
                                </div>
                            </div>
                        </div>

                        <div class="form-group">
                            <label for="inputLanguage" class="col-sm-2 control-label"
                                   th:text="#{page.account.profile.form.label.language}">Language</label>
                            <div class="col-sm-10" id="inputLanguage">
                                <select class="form-control"
                                        th:field="*{langKey}"
                                        v-model="profile.langKey">
                                    <option th:each="language: ${baseModel.activeLanguages}"
                                            th:value="${language.languageCode}">
                                        <span th:text="${language.translatedName}">English</span>

                                        <span th:if="${!language.languageCode.equals(language.displayLanguageCode)}"
                                              th:text="' (' + ${language.englishName} + ')'">English Translated</span>
                                    </option>
                                </select>
                            </div>
                        </div>

                        <div class="form-group">
                            <div class="col-sm-offset-2 col-sm-10">
                                <button type="submit" class="btn btn-primary" id="btnSaveProfile"
                                        th:attr="data-loading-text=#{page.account.profile.form.saving}"
                                    th:text="#{page.account.profile.form.btn_save}">Save</button>
                            </div>
                        </div>
                    </form>
                </div>
                <!-- Email Notifications -->
                <div class="bhoechie-tab-content">
                    Dab
                </div>
            </div>
        </div>
    </div>

    <!-- Load current page javascript file -->
    <script src="../../../resources/js/account/profile.js"
            th:src="@{/resources/js/account/profile.js}"></script>
    <script type="text/javascript" th:inline="javascript">
        window.onload = function () {
            Profile.init(/*[[${user}]]*/);

            $("div.bhoechie-tab-menu>div.list-group>a").click(function (e) {
                e.preventDefault();
                $(this).siblings('a.active').removeClass("active");
                $(this).addClass("active");
                var index = $(this).index();
                $("div.bhoechie-tab>div.bhoechie-tab-content").removeClass("active");
                $("div.bhoechie-tab>div.bhoechie-tab-content").eq(index).addClass("active");
            });
        };
    </script>
</div>


<!-- JavaScript libraries used to be able to open the html page itself in browser -->
<script src="../../../resources/vendor/vue/vue.min.js"
        th:src="@{/resources/vendor/vue/vue.min.js}"></script>
<script src="../../../resources/vendor/vuelidate/vuelidate.min.js"
        th:src="@{/resources/vendor/vuelidate/vuelidate.min.js}"></script>
<script src="../../../resources/vendor/vuelidate/validators.min.js"
        th:src="@{/resources/vendor/vuelidate/validators.min.js}"></script>
<script src="../../../resources/vendor/vue-resource/vue-resource.min.js"
        th:src="@{/resources/vendor/vue-resource/vue-resource.min.js}"></script>
<script src="../../../resources/vendor/jquery/jquery-3.2.1.min.js"
        th:src="@{/resources/vendor/jquery/jquery-3.2.1.min.js}"></script>
<script src="../../../resources/vendor/bootstrap/js/bootstrap.min.js"
        th:src="@{/resources/vendor/bootstrap/js/bootstrap.min.js}"></script>
<script src="../../../resources/vendor/bootstrap-notify/bootstrap-notify.min.js"
        th:src="@{/resources/vendor/bootstrap-notify/bootstrap-notify.min.js}"></script>

</body>
</html>